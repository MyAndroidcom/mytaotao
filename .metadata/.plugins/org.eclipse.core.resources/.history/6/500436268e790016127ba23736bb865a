<%@ page language="java" contentType="text/html; charset=utf-8"
	pageEncoding="utf-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<!-- AJAX是一个【局部刷新】的【异步】通讯技术
	    AJAX不是全新的语言，是2005年Google公司推出的一种全新【编程模式】，不是新的编程语言
 -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>基于HTML，以GET或POST方式，检查注册用户名是否在数据库中已存在</title>
</head>
<body>
	<form>
		用户名[GET]：<input id="usernameID" type="text" name="username" maxlength="4"/>
		光标移出后，立即检查结果
	</form><p/>
	<span id="resID"></span>

	<script type="text/javascript">
		//创建AJAx异步对象
		function createAJAX(){
			var ajax = null;
			try{
				//IE
				ajax = new ActiveXObject("microsoft.xmlhttp");
			}catch (e) {
				// 非IE
				try{
					ajax = new XMLHttpRequest();
				}
				catch (e) {
					alert("你的浏览器不支持AJAX")
				}
			}
			return ajax;
		}
	</script>
	<script type="text/javascript">
		document.getElementById("usernameID").onblur=function(){
			//获取文本框中输入的值
			var username = this.value;
			//如果用户没有填内容
			if(username.length == 0){
				//提示 
				document.getElementById("resID").innerHTML = "用户名必填";
			}else{
				//对汉字进行UTF-8(U8)的编码
				username = encodeURI(username);
				//NO1)
				var ajax = createAJAX();
				//NO2)
				var method = "GET";
				var url = "${pageContext.request.contextPath}/UserServlet?time="+new Date().getTime()+"&username=" + username;
				ajax.open(method,url);
				//NO3)
				ajax.send(null);
				
			
		}
	</script>
</body>
</html>